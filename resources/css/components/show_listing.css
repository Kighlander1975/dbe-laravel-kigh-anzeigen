/*** Layout-Grundstruktur ***/
.listing-details {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
}

/*** Desktop-Layout: Spaltenaufteilung per Grid-Areas ***/
.listing-details .row-1 {
    display: grid;
    grid-template-columns: 168px 608px 360px; /* Thumbs | Current | Seller */
    grid-template-areas: "thumbs current seller";
    column-gap: 32px; /* Abstand Thumbs <-> Current */
    align-items: start;
}

/** HTML-Kindelemente auf Grid-Areas mappen **/
.listing-details .row-1 > .current-picture {
    grid-area: current;
}
.listing-details .row-1 > .thumb-pictures {
    grid-area: thumbs;
}
.listing-details .row-1 > .seller-informations {
    grid-area: seller;
}

/* Sichtbare Container */
.current-picture,
.seller-information,
.seller-action-buttons .favorite,
.seller-action-buttons .contact {
    background: #f5f5f7;
    border-radius: 8px;
}

/*** Aktuelles Bild ***/
.current-picture {
    position: relative;
    min-height: 520px;
    margin-right: 32px;
    display: grid;
    place-items: center;
    background: #fff;
    border: none;
    border-radius: 12px;
    padding: 8px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06), 0 12px 28px rgba(0, 0, 0, 0.1);
    overflow: hidden; /* hier okay, weil die Nav-Buttons innen bleiben */
}

.current-picture > img {
    position: absolute;
    inset: 8px;
    margin: auto;
    max-width: calc(100% - 16px);
    max-height: calc(100% - 16px);
    object-fit: contain;
    object-position: center;
    border-radius: 8px; /* 12px - 8px = 4px; visuell runder passt 8px besser zum großen Radius */
}

/*** Verkäuferbereich ***/
.seller-informations {
    display: grid;
    grid-template-rows: 1fr auto;
    gap: 2rem;
    align-items: stretch;
    height: 100%;
    min-height: 520px;
}

.seller-information {
    min-height: 260px;
    border: 3px solid #1cb1b1;
    border-radius: 8px;
    background: #fff;
    padding: 16px 18px;
    color: #1a1a1a;
    max-width: 360px;

    display: flex;
    flex-direction: column;
    justify-content: center;
}

.seller-information .si-row {
    display: grid;
    grid-template-columns: 22px 1fr;
    gap: 10px;
    align-items: start;
}
.seller-information .si-row + .si-row {
    margin-top: 12px;
}

.seller-information .si-ico {
    line-height: 1;
    margin-top: 2px;
    display: inline-flex;
    width: 18px;
    height: 18px;
}
.seller-information .si-ico img {
    width: 18px;
    height: 18px;
    filter: brightness(0) saturate(100%);
}

.seller-information .si-label {
    font-weight: 700;
    margin-bottom: 2px;
    font-size: 1.2em;
}
.seller-information .si-value {
    font-weight: 500;
}

.seller-information .si-value a {
    color: #0b807d;
    text-decoration: none;
}
.seller-information .si-value a:hover {
    text-decoration: underline;
}

.seller-information .si-price .si-value-price {
    font-size: 1.9rem;
    font-weight: 800;
    color: #11a6a3;
    letter-spacing: 0.2px;
    margin-top: 2px;
}

@media (max-width: 600px) {
    .seller-information {
        padding: 14px;
        border-radius: 12px;
    }
    .seller-information .si-row {
        grid-template-columns: 20px 1fr;
        gap: 8px;
    }
    .seller-information .si-price .si-value-price {
        font-size: 1.7rem;
    }
}

/*** Button-Zeile ***/
.seller-action-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    align-self: end;
}
.seller-action-buttons .favorite,
.seller-action-buttons .contact {
    min-height: 56px;
    border-radius: 8px;
}

/*** Button-Utilities ***/
.btn-inline {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    line-height: 1;
    vertical-align: middle;
    letter-spacing: 0;
}
.btn-sizing {
    min-width: var(--btn-min-w, 8rem);
    padding: var(--btn-pad, 0.5rem 0.875rem);
}
.icon-mask,
.icon-mask-mail {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
    line-height: 1;
    vertical-align: middle;
}
.icon-mask {
    width: 18px;
    height: 18px;
    background-color: currentColor;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
    -webkit-mask-size: contain;
    mask-size: contain;
}
.icon-mask-mail {
    width: 20px;
    height: 20px;
    background-color: #fff;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
    -webkit-mask-size: contain;
    mask-size: contain;
}

/* =========================
   Mobile
   ========================= */
@media (max-width: 900px) {
    /* Reihenfolge mobil: Current -> Thumbs -> Seller */
    .listing-details .row-1 {
        display: grid;
        grid-template-columns: 1fr;
        grid-template-areas: "current" "thumbs" "seller";
        gap: 16px;
    }

    .current-picture {
        min-height: 320px;
        margin-right: 0;
        overflow: hidden;
        background: #ffffff;
        border: none;
        border-radius: 12px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06),
            0 12px 28px rgba(0, 0, 0, 0.1);
        padding: 8px;
    }

    /* Seller mobil als 2-Spalten-Layout */
    .seller-informations {
        display: grid;
        grid-template-columns: 1fr minmax(220px, 32%);
        gap: 16px;
        align-items: start;
        min-height: unset;
    }

    .seller-information {
        min-height: 260px;
    }

    .seller-action-buttons {
        display: grid;
        grid-template-columns: 1fr;
        grid-auto-rows: minmax(56px, auto);
        gap: 16px;
        align-self: start;
    }

    .seller-action-buttons .favorite,
    .seller-action-buttons .contact {
        min-height: 56px;
    }

    @media (max-width: 420px) {
        .seller-informations {
            grid-template-columns: 1fr;
        }
    }
}

/* Mobile Portrait – vertikale Abstände straffen */
@media (max-width: 900px) and (orientation: portrait) {
    .seller-informations {
        gap: 12px;
    }
    .seller-information {
        margin-bottom: 8px;
        padding-top: 1px;
        margin-top: -1px;
    }
    .seller-action-buttons > *:first-child {
        margin-top: 8px;
    }
    .seller-information > *:not(:last-child) {
        margin-bottom: 6px;
    }
}

/* =========================================
   Overlay-Navigation in .current-picture
   ========================================= */
.current-picture .cp-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 5;

    width: 36px;
    height: 36px;
    border-radius: 999px;

    display: inline-flex;
    align-items: center;
    justify-content: center;

    background: rgba(0, 0, 0, 0.55);
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.35);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.18);

    cursor: pointer;
    user-select: none;

    transition: background-color 120ms ease, transform 120ms ease,
        opacity 120ms ease, box-shadow 120ms ease;

    outline: none;
}
.current-picture .cp-nav-prev {
    left: 12px;
}
.current-picture .cp-nav-next {
    right: 12px;
}

.current-picture .cp-icon-mask {
    display: block;
    width: 16px;
    height: 16px;
    background: currentColor;
}

.current-picture .cp-nav:hover,
.current-picture .cp-nav:focus-visible {
    background: rgba(0, 0, 0, 0.7);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.22);
}
.current-picture .cp-nav:active {
    transform: translateY(-50%) scale(0.96);
}

@media (hover: hover) and (pointer: fine) {
    .current-picture .cp-nav {
        opacity: 0.9;
    }
    .current-picture:hover .cp-nav {
        opacity: 1;
    }
}
@media (max-width: 900px) {
    .current-picture .cp-nav {
        width: 32px;
        height: 32px;
    }
    .current-picture .cp-nav-prev {
        left: 8px;
    }
    .current-picture .cp-nav-next {
        right: 8px;
    }
}
@media (max-width: 420px) {
    .current-picture .cp-nav {
        width: 28px;
        height: 28px;
    }
}
.current-picture .cp-nav:focus-visible {
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.9),
        0 0 0 4px rgba(43, 108, 176, 0.9), 0 4px 10px rgba(0, 0, 0, 0.22);
}

/*** ROW 2: Angebotstitel und Beschreibung ***/
.row-2 {
    padding: 1rem 0;
}
.row-2 .listing-title {
    margin: 0 0 0.5rem;
    font-size: 1.5rem;
    line-height: 1.25;
    font-weight: 700;
}
.row-2 .listing-metas {
    display: flex;
    flex-wrap: wrap;
    flex-direction: column;
    gap: 0.25rem;
    margin: 0 0 0.75rem;
}
.row-2 .meta-item {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: #606770;
    font-size: 0.95rem;
}
.row-2 .meta-ico {
    display: inline-flex;
    width: 16px;
    height: 16px;
    align-items: center;
    justify-content: center;
}
.row-2 .meta-ico img {
    display: block;
}
.row-2 .listing-description {
    color: #222;
    line-height: 1.6;
    white-space: pre-wrap;
}

/*-------------------------------------*/

/*** CSS für Thumbnails (Desktop-only) ***/

/* Container */
.thumb-pictures {
    position: relative;
    display: grid;
    grid-template-rows: 1fr; /* eine Zeile, Buttons sind im Viewport */
    align-items: center;
    row-gap: 0;
    min-height: 520px;
    height: 100%;
    max-width: 168px;
    border-radius: 8px;
    padding: 0;
    box-sizing: border-box;
    background: #fff; /* neutraler Hintergrund */
}

/* Marker für Scrollbarkeit (>=4 Bilder) */
.thumb-pictures.is-scrollable {
}

/* Viewport: 3 Thumbs, Buttons als Overlay */
.thumb-viewport {
    position: relative; /* Bezug für absolute Buttons */
    display: grid;
    grid-template-rows: repeat(3, auto);
    justify-items: center; /* zentriert die 8px schmaleren Bilder */
    row-gap: 16px;
    height: 100%;
    border-radius: 6px;
    box-sizing: border-box;
    /* Kein Padding mehr – Buttons liegen als Overlay darüber */
}

/* Einzelner Thumb */
.thumb {
    position: relative; /* Bezugspunkt fürs Badge */
    width: 100%;
    display: grid;
    place-items: center;
    box-sizing: border-box;
    border-radius: 10px;
    overflow: visible; /* Badge / Schatten darf rausstehen */
    z-index: 0;
}

/* Bild: 8px schmaler als Container, damit Schatten sichtbar bleibt */
.thumb-img {
    position: relative;
    z-index: 1;
    width: calc(100% - 8px);
    aspect-ratio: 1 / 1;
    height: auto;
    object-fit: cover;
    display: block;
    border-radius: 10px;
}

/* Platzhalter (falls kein Bild vorhanden) */
.thumb-img.thumb-placeholder {
    background: repeating-linear-gradient(
        45deg,
        #e9edf2,
        #e9edf2 8px,
        #dde3ea 8px,
        #dde3ea 16px
    );
}

/* Badge-Overlay links mittig */
.thumb-badge {
    position: absolute;
    z-index: 2;
    left: 10px; /* etwas mehr Abstand als 8px */
    top: 50%;
    transform: translateY(-50%);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 22px;
    min-width: 28px;
    padding: 0 8px;
    border-radius: 999px;

    background: rgba(56, 132, 255, 0.18);
    color: #0b3d91;
    border: 1px solid rgba(56, 132, 255, 0.35);

    font-size: 12px;
    line-height: 1;
    font-weight: 600;
    letter-spacing: 0.02em;

    backdrop-filter: saturate(120%) blur(2px);
    pointer-events: none;
}

/* Aktiver Thumb: Rahmen + leichte Skalierung */
.thumb.is-active .thumb-img {
    outline: 2px solid #2b6cb0;
    outline-offset: 0;
    box-shadow: 0 4px 14px rgba(0, 0, 0, 0.16);
    transform: translateZ(0) scale(1.01);
    transition: transform 140ms ease, box-shadow 140ms ease,
        outline-color 140ms ease;
}

/* Badge im aktiven Zustand stärker betonen */
.thumb.is-active .thumb-badge {
    background: #2b6cb0;
    color: #fff;
    border-color: #2b6cb0;
}

/* Subtiler Hover nur für nicht-aktive Thumbs */
@media (hover: hover) and (pointer: fine) {
    .thumb:not(.is-active) .thumb-img:hover {
        /*box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);
        transform: translateZ(0) scale(1.01);*/
    }
}

/* Scroll-Buttons als Overlay */
.thumb-scroll {
    position: absolute;
    left: 4px;
    right: 4px;
    width: auto;
    min-height: 40px;
    appearance: none;

    /* Sehr transparent im Idle-Zustand */
    background: rgba(255, 255, 255, 0.3); /* Fläche kaum sichtbar */
    border: 1px solid rgba(0, 0, 0, 0.14); /* dezente Kontur */
    color: #0a0a0a; /* Einfluss auf Icon-Farbe via currentColor */
    /* Icon deutlich sichtbar trotz transparenter Fläche */
    /* Wir erhöhen die Icon-Sichtbarkeit zusätzlich weiter unten */

    border-radius: 10px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: default; /* später pointer */
    user-select: none;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06); /* sehr subtil */
    transition: background-color 140ms ease, box-shadow 140ms ease,
        transform 120ms ease, opacity 120ms ease, color 140ms ease,
        border-color 140ms ease;
    z-index: 10;
    pointer-events: none;
    opacity: 0;
    will-change: transform, background-color, box-shadow;
}

/* Aktiv wenn scrollbar */
.thumb-pictures.is-scrollable .thumb-scroll {
    pointer-events: auto;
    opacity: 1;
    cursor: pointer;
    color: rgba(0, 0, 0, 0.85);
}

/* OBERER Button: unten eckig */
.thumb-scroll-up {
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: calc(100% - 8px);
    right: auto;

    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
}

/* UNTERER Button: oben eckig */
.thumb-scroll-down {
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: calc(100% - 8px);
    right: auto;

    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
}

/* Hover/Focus: VOLLFLÄCHIG und klarer Rahmen */
.thumb-scroll:hover,
.thumb-scroll:focus-visible {
    background: #f5f7fb; /* vollfarbig hell */
    border-color: rgba(0, 0, 0, 0.18);
    color: #111; /* Icon-kontrast */
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    outline: 2px solid #2b6cb0;
    outline-offset: -2px; /* sitzt direkt an der Kante */
}

/* Active: kleiner Druckeffekt */
.thumb-scroll-up:active,
.thumb-scroll-down:active {
    transform: translateX(-50%) scale(0.98);
}

/* Icon via CSS-Mask – Pfeil sehr sichtbar */
.thumb-scroll-ico {
    width: 18px;
    height: 18px;

    /* Pfeil kontrastreich: wir nutzen currentColor, machen diese im Idle dunkler */
    background-color: currentColor;

    -webkit-mask: var(--thumb-arrow) no-repeat center / contain;
    mask: var(--thumb-arrow) no-repeat center / contain;

    /* Extra Boost für Sichtbarkeit im Idle: leichter Schein hinter dem Icon */
    filter: drop-shadow(0 0 1px rgba(0, 0, 0, 0.35));
}

/* Icon-Grafiken */
.thumb-scroll-up .thumb-scroll-ico {
    --thumb-arrow: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="%23000" viewBox="0 0 24 24"><path d="M6.7 14.7a1 1 0 0 1 0-1.4l4.6-4.6a1 1 0 0 1 1.4 0l4.6 4.6a1 1 0 0 1-1.4 1.4L12 10.41l-4.3 4.3a1 1 0 0 1-1.4 0z"/></svg>');
}
.thumb-scroll-down .thumb-scroll-ico {
    --thumb-arrow: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="%23000" viewBox="0 0 24 24"><path d="M17.3 9.3a1 1 0 0 1 0 1.4l-4.6 4.6a1 1 0 0 1-1.4 0L6.7 10.7a1 1 0 0 1 1.4-1.4L12 13.59l3.9-3.9a1 1 0 0 1 1.4 0z"/></svg>');
}

/* Optional: Dark-Mode Tuning */
@media (prefers-color-scheme: dark) {
    .thumb-scroll {
        background: rgba(28, 28, 28, 0.18); /* minimal sichtbar */
        border-color: rgba(255, 255, 255, 0.1);
        color: #fafafa; /* Icon hell für Kontrast */
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    }
    .thumb-scroll:hover,
    .thumb-scroll:focus-visible {
        background: rgba(
            255,
            255,
            255,
            0.12
        ); /* vollfarbig relativ zu Dark-UI */
        border-color: rgba(255, 255, 255, 0.22);
        color: #fff;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
    }
}
